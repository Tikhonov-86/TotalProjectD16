{% extends 'default.html' %}
{% load static %}

{% block title %}
{{ article.id.title }}
{% endblock title %}

{% load censor_filter %}
{% load custom_tags %}

{% block content %}
    <h3><b>Новость №{{ article.id }}</b></h3>
    <hr>
    <h4>{% current_time '%d %b %Y' %}</h4>
    <hr>
    {{ article.title }}

    {% if articles %}
        <table>
            <tr>
                <td><b>Файл</b></td>
                <td><b>Заголовок</b></td>
                <td><b>Превью статьи</b></td>
                <td><b>Дата создания</b></td>
                <td><b>Категория</b></td>
                <td><b>Действия</b></td>
            </tr>
            <tr>
                {% if article.upload %}
                <td><img scr="{{ article.upload.url }}" width="200" height="200"></td>
                {% else %}
                    <td> - </td>
                {% endif %}

                <td>{{ article.title }}</td>
                <td>{{ article.text|truncatechars:20 }}</td>
                <td>{{ article.dateCreation|date:'d M Y'}}</td>
                <td>{{ article.get_category_display }}</td>

                <td>
                    {% if Article.author == request.user.author %}
                    <a href="{% url 'article_update' Article.id %}">Изменить</a>
                    {% endif %}
                    {% if perms.testapp.delete_article %}
                    <a href="{% url 'article_delete' Article.id %}">Удалить</a>
                    {% endif %}
                </td>

            </tr>
        </table>
    {% else %}
        <h5> На данный момент времени ни один пост не добавлен... </h5>
        <h6> Опубликуйте свою статью ;) </h6>
    {% endif %}
    {% if perms.testapp.add_article %}
        <br><br><small><button href="{% url 'article_create' %}">Добавить новое объявление</button></small>
    {% endif %}
{% endblock content %}